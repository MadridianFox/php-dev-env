# PDE - PHP dev environment #

Набор скриптов для быстрого запуска php-fpm + nginx.

## Установка ##

```shell
git clone git@github.com:MadridianFox/php-dev-env.git
cd php-dev-env
sudo ln -s $PWD/pde /usr/local/bin/pde
```

## Использование ##

Pde рассчитан на работу с user defined сетями docker.
Если у вас уже создана сеть для вашего проекта, этот шаг можно пропустить.
Вы можете создать сеть командой:
```shell
docker networks create my-network
```

Создаём файл настроек в папке проекта:
```shell
pde init
```
В результате в папке проекта будет создан файл `.pde`.
Все настройки будут заполнены с учётом пути по которому располагается проект.
Вы можете переопрелить некоторые настройки передав команде определённые env переменные:
```shell
NETWORK=my-network pde init
```

Запуск прокси для http траффика:
```shell
pde proxy start
```
Это создаст дополнительный контейнер, который позволит обращаться к контейнерам nginx в этой сети по доменам вида `${PROJECT_NAME}.127.0.0.1.nip.io`.

Запуск и остановка проекта:
```shell
pde start
pde stop
```

## Запуск composer в том же окружении ##

Для того чтобы окружение composer точно совпадало с тем, в котором работает система, рекомендуется запускать composer в контейнере.
Для этого необходимо создать образ, на базе того в котором работает приложение. Пример такого образа описан в файле `tool.dokerfile`.

Название образа для запуска в нём инструментов задаётся переменной TOOL_IMAGE.

Вызвать composer в контейнер (отдельном от контейнера приложения) можно командой:
```shell
pde tool composer install
```